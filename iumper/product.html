<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>中柏商城-中柏平板电脑、中柏笔记本电脑、中柏电脑官方网站</title>
    <link rel="stylesheet" href="public/css/style.css"/>
</head>
<body>
 <header id="header"></header>
    <!-- 内容-->
    <div class="main">
       <div class="tpc">
        <div class="tpc-1">
            <ul>
                <li><img id="tpcImg1" src="Public/images/1477987335.jpg" alt=""/></li>
                <li><img id="tpcImg2" src="Public/images/1502865077.jpg" alt=""/></li>
            </ul>           
       <!--  -->
        </div>
        <div class="tpc-2">
            <ul>
                <li>分类：</li>
                <li ><a href="product.html?dz=100">平板电脑</a></li>
                <li ><a href="product.html?dz=200">笔记本电脑</a></li>
                <li ><a href="product.html?dz=300">电脑配件</a></li>
            </ul>
        </div>
        <div class="tpc-3">
            <ul>
                <li>排序：</li>
                <li>
                    <a href="#">销量<span></span></a>
                </li>
                <li>
                    <a href="#">价格<span></span></a></li>
                <li>
                    <a href="#">上架时间<span></span></a></li>
                <li>
                    <a href="#">好评<span></span></a></li>
            </ul>
        </div>
        <div class="tpc-4" id="tpc4-product">
            <ul>
                <!-- 商品列表引入 -->
            </ul>
        </div>
       </div>
    </div>
    <footer id=footer></footer>
    <script src="Public/js/jquery-3.2.1.js"></script>
    <script src="Public/myjs/header.js"></script>
    <script src="Public/myjs/footer.js"></script>
<script>
$(function(){
    var dz=location.search.split("=")[1]
        if(dz){
            $.ajax({
                url:"http://127.0.0.1:8080/product/v1",
                type:"get",
                data:{dz},
                dataType:"json",
                success:function(result){
/*pid,title,img,price,svolume,Enumber*/  
                   var html=""
                   for(var pro of result){
                       html+=`<li>
                                <a href="product_details.html?lid=${pro.pid}">
                                    <img src=${pro.img} alt=""/>
                                    <h3 class="font333">${pro.brief}</h3>
                                    <p class="font999">销量：${pro.svolume}<span class="right">评价：${pro.Enumber}</span></p>
                                    <p class="font-f90">${(pro.price).toFixed(2)}元</p>
                                </a>
                              </li>`
                            }
                        $("#tpc4-product>ul").html(html)
/*对应品牌选中样式class="tpc-2pg"*/
            var $tpc2pg=$(".tpc-2>ul>li>a")
            $($tpc2pg[dz/100-1]).addClass("tpc-2pg")
/*轮播图*/
            var $ulImg=$(".tpc-1>ul")
        var times=setInterval(slideshow,5500) //显示5s 过渡0.5秒
        function slideshow(){ 
            $ulImg.css("opacity","0")        //透明
                setTimeout(function(){
                $("#tpcImg1").toggle()      //显示隐藏
                $ulImg.css("opacity","1")
            },500)
        }
        $ulImg.mouseenter(function(){
                    clearInterval(times);   //关闭
        });
        $ulImg.mouseleave(function(){
            times=setInterval(slideshow,1500);//开启
        })
                }
            })
        }
})
    </script>
</body>
</html>